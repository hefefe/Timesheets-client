<div class="grid">
  <div class="col-12">
    <div class="ml-4 mt-4">
      <div class="flex flex-row align-items-center justify-content-start">
        <div>
          <p-dropdown appendTo="body" [options]="projects" [(ngModel)]="selectedProject" placeholder="Select project"
            class="p-inputtext-lg w-full">
            <ng-template pTemplate="selectedItem">
              <div class="item" *ngIf="selectedProject">
                <div class="flex align-items-center">
                  <img id="leadPhoto" src="data:image/png;base64,{{selectedProject.photo}}"
                    onerror="this.src='../../../assets/img/defaultProjectImage.png';" class="shadow-4 mr-2"
                    style="width: 25px; height:25px; border-radius:5px" />
                  {{selectedProject.name}}
                </div>
              </div>
            </ng-template>
            <ng-template let-project pTemplate="item">
              <div class="flex align-items-center">
                <img id="leadPhoto" src="data:image/png;base64,{{project.photo}}"
                  onerror="this.src='../../../assets/img/defaultProjectImage.png';" class="shadow-4 mr-2"
                  style="width: 25px; height:25px; border-radius:5px" />
                {{project.name}}
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="ml-2">
          <p-dropdown appendTo="body" [style]="{width:'100%'}" [options]="dates" [(ngModel)]="selectedDates"
            class="p-inputtext-lg w-full">
            <ng-template pTemplate="selectedItem">
              <div class="item flex flex-row justify-content-start align-items-center" *ngIf="selectedDates">
                {{selectedDates.name}}
              </div>
            </ng-template>
            <ng-template let-date pTemplate="item">
              <div class="flex flex-row justify-content-start align-items-center">
                {{date.name}}
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="h-full ml-2">
          <p-button size="large" pRipple icon="pi pi-fw pi-search" class="p-button-solid" label="Show statistics"
            (click)="getStats()" [style]="{height: '56px'}"></p-button>
        </div>
      </div>
    </div>
    <div class="flex flex-column align-items-stretch justify-content-center" *ngIf="(statistics | json) != ({} | json)">
    <div class="card px-4 py-4 flex flex-row align-items-center justify-content-between">
      <div style="width:15%">
        <div class="card mb-0" [style]="{
          border: '2px solid #333333',
          borderRadius: '5px',
          'box-shadow': '3px 3px 10px #111',
          padding: '10px',
          margin:'0px 0px 10px 0px',
      }">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Time tracked</span>
              <div class="text-900 font-medium text-xl">{{convertTimeToString(getHoursAndMinutes(statistics.timeTracked!)) || '0 minutes'}}</div>
            </div>
            <div class="flex align-items-center justify-content-center bg-primary border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <i class="pi pi-chevron-circle-down text-xl"></i>
            </div>
          </div>
          <span class="text-primary-500 font-medium">{{name}} data</span>
        </div>
      </div>
      <div style="width:15%">
        <div class="card mb-0" [style]="{
        border: '2px solid #333333',
        borderRadius: '5px',
        'box-shadow': '3px 3px 10px #111',
        padding: '10px',
        margin:'0px 0px 10px 0px',
    }">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Velocity</span>
              <div class="text-900 font-medium text-xl">{{statistics.velocity || '0.00' | number : '1.2-2'}} story points
              </div>
            </div>
            <div class="flex align-items-center justify-content-center bg-primary border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <i class="pi pi-arrow-up-right text-xl"></i>
            </div>
          </div>
          <span class="text-secondary-500 font-medium">4 sprints back data</span>
        </div>
      </div>
      <div style="width:15%">
        <div class="card mb-0" [style]="{
      border: '2px solid #333333',
      borderRadius: '5px',
      'box-shadow': '3px 3px 10px #111',
      padding: '10px',
      margin:'0px 0px 10px 0px',
  }">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Number of employees</span>
              <div class="text-900 font-medium text-xl">{{statistics.numberOfEmployees || '0'}}</div>
            </div>
            <div class="flex align-items-center justify-content-center bg-primary border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <i class="pi pi-id-card text-xl"></i>
            </div>
          </div>
          <span class="text-secondary-500 font-medium">general data</span>
        </div>
      </div>
      <div style="width:15%">
        <div class="card mb-0" [style]="{
    border: '2px solid #333333',
    borderRadius: '5px',
    'box-shadow': '3px 3px 10px #111',
    padding: '10px',
    margin:'0px 0px 10px 0px',
}">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Money spent on project</span>
              <div class="text-900 font-medium text-xl">{{statistics.moneySpent || '0.00' | number : '1.2-2'}} PLN</div>
            </div>
            <div class="flex align-items-center justify-content-center bg-primary border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <i class="pi pi-money-bill text-xl"></i>
            </div>
          </div>
          <span class="text-primary-500 font-medium">{{name}} data</span>
        </div>
      </div>
      <div style="width:15%">
        <div class="card mb-0" [style]="{
    border: '2px solid #333333',
    borderRadius: '5px',
    'box-shadow': '3px 3px 10px #111',
    padding: '10px',
    margin:'0px 0px 10px 0px',
}">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Story points done</span>
              <div class="text-900 font-medium text-xl">{{statistics.tasksDone || '0'}}</div>
            </div>
            <div class="flex align-items-center justify-content-center bg-primary border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <i class="pi pi-book text-xl"></i>
            </div>
          </div>
          <span class="text-primary-500 font-medium">{{name}} data</span>
        </div>
      </div>
    </div>
    <!-- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
    <div class="flex flex-row justify-content-between align-items-center mx-4">
      <div class="card flex flex-column justify-content-center align-items-center p-2" [style]="{
        border: '2px solid #333333',
        borderRadius: '5px',
        'box-shadow': '3px 3px 10px #111',
        padding: '10px',
        margin:'0px 0px 10px 0px',
    }">
        <span class="block text-500 font-medium mb-3">Story points commited and done per sprint</span>
        <p-chart type="bar" [data]="data" [options]="options" height="40vh" width="33.85vw"></p-chart>
    </div>
    <div class="card flex flex-column justify-content-center align-items-center p-2" [style]="{
      border: '2px solid #333333',
      borderRadius: '5px',
      'box-shadow': '3px 3px 10px #111',
      padding: '10px',
      margin:'0px 0px 10px 0px',
  }">
      <span class="block text-500 font-medium mb-3">Burndown chart</span>
      <p-chart type="line" height="40vh" width="54.2vw" [data]="dataLine" [options]="optionsLine"></p-chart>
  </div>
    </div>
  </div>
  </div>
</div>
