<div class="grid">
  <div class="col-12">
    <div class="ml-4 mt-4 flex flex-column">
    <div class="flex flex-row">
      <button pButton pRipple icon="pi pi-arrow-left" class="p-button-text p-button-primary mr-2 border-top-1 border-bottom-1 border-primary border-noround" (click)="backClicked()"></button>
      <span class="text-3xl font-medium">{{projectDetails.name}}</span>
    </div>
    <div class="flex flex-column mt-3">
      <p class="text-base font-light m-0 p-0">End of sprint: {{date}}</p>
      <p class="text-base font-light m-0 p-0">Iteration: {{projectDetails.sprintNumber}}</p>
    </div>
    <div class="mt-3">
      <button pButton pRipple label="New task" icon="pi pi-plus" class="p-button-outlined p-button-success mr-2" (click)="openNew()"></button>
    </div>
  </div>
    <div class="flex flex-row no-wrap justify-content-evenly align-items-stretch">
      <div *ngFor="let taskGroup of taskGroups;" style="width: 12.5%;" class="my-4">
      <p-fieldset legend="{{taskGroup.workflowDTO?.name}}" [style]="{height:'100%'}">
        <p-card *ngFor="let task of taskGroup.tasks;" class="mb-2" [style]="{
          border: '2px solid #333333',
          borderRadius: '5px',
          'box-shadow': '3px 3px 10px #111',
          color: 'white',
          padding: '10px',
          margin:'0px 0px 10px 0px'
      }">
          <ng-template pTemplate="header">
            <div class="flex flex-row justify-content-between">
            <div>
              <p>{{projectDetails.key}}-{{task.key}}</p>
            </div>
            <div class="flex flex-row justify-content-center align-items-center">
              <p class="mr-1">{{task.taskType?.name}}</p>
              <i class="pi {{task.taskType?.icon}}" [ngStyle]="{color: task.taskType?.color}"></i>
            </div>
          </div>
          </ng-template>
          <ng-template pTemplate="content">
          <div style="margin-top: -15%;">
            <p class="text-lg font-semibold text-left">{{task.name}}</p>
          </div>
          </ng-template>
          <ng-template pTemplate="footer">
            <div class="flex flex-row justify-content-between" style="margin-top: -5%;">
              <div class="flex flex-row justify-content-center align-items-center">
                <div>
                  <img id="projectPhoto" src="data:image/png;base64,{{task.person?.photo}}" onerror="this.src='../../../assets/img/defaultProjectImage.png';" class="shadow-4 mr-2" style="width: 35px; height:35px; border-radius:4px" />
                </div>
                <div class="flex flex-column justify-content-start align-items-start">
                  <p class="m-0 p-0">{{task.person?.firstName}}</p>
                  <p class="m-0 p-0">{{task.person?.lastName}}</p>
                </div>
              </div>
              <div class="flex flex-row justify-content-center align-items-center">
                {{task.storyPoints}}
              </div>
            </div>
          </ng-template>
      </p-card>
    </p-fieldset>
    </div>
    </div>
  </div>
</div>

